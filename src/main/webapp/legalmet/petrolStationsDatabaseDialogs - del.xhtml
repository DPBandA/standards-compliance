<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"> 
    
    

    <p:dialog width="800"
              height="600"
              draggable="true"
              id="petrolStationDetailDialog"
              modal="true"
              rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
              widgetVar="petrolStationDialog"
              header="Petrol Station Detail" >

        <p:ajax event="close"                                      
                async="true"
                update=":mainTabViewForm:mainTabView:legalMetTabView:petrolStationsDatabaseTable"
                listener="#{legalMetrologyManager.closePetrolStationDialog2()}"/>


        <!-- To be included at button of form -->
        <p:commandButton value="Save"
                         onstart="longProcessDialogVar.show();"
                         actionListener="#{legalMetrologyManager.savePetrolStation}"   
                         oncomplete="longProcessDialogVar.hide();"
                         icon="ui-icon ui-icon-check"
                         process=":unitDialogForms:petrolStationDetailDialog"/>
        <p:spacer height="0" width="10"/>
        <p:commandButton value="Close"
                         actionListener="#{legalMetrologyManager.closePetrolStationDialog1()}"                         
                       
                         update=":mainTabViewForm:mainTabView:legalMetTabView:petrolStationsDatabaseTable"
                         process=":unitDialogForms:petrolStationDetailDialog"
                         icon="ui-icon ui-icon-close" />
        <hr/>
        <h:panelGrid id="petrolStationDialogContent" columns="2">            

            <h:outputText value="Parent company/client *: " style="font-weight: bold" />
            <h:panelGroup>
                <p:autoComplete id="petrolStationClient"
                                size="35"
                                maxResults="12"
                                var="client"
                                value="#{legalMetrologyManager.currentPetrolStation.client}"
                                itemLabel="#{client.name}"
                                itemValue="#{client}"
                                converter="clientConverter"
                                forceSelection="false"
                                completeMethod="#{App.completeClient}" >
                    <p:ajax event="itemSelect"                                        
                            listener="#{legalMetrologyManager.updatePetrolStationClient}"/>
                    <p:ajax event="keyup"                                        
                            listener="#{legalMetrologyManager.updatePetrolStationClient}"/>
                </p:autoComplete>

                <p:spacer height="0" width="4"/>
                <p:commandButton icon="ui-icon-pencil"
                                 onstart="longProcessDialogVar.show();"
                                 actionListener="#{legalMetrologyManager.editPetrolStationClient}"
                                 update=":clientForm"
                                 oncomplete="clientFormDialog.show();longProcessDialogVar.hide();"
                                 process="@this"
                                 title="View or edit this client's detail"/>
                <p:spacer height="0" width="4"/>
            </h:panelGroup>   

            <h:outputText value="Name *:" style="font-weight: bold" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolStation.name}"
                         id="petrolStationName"                             
                         validatorMessage="Please enter a valid name" >
                <p:ajax event="keyup"
                        global="false"                            
                        listener="#{legalMetrologyManager.updatePetrolStation()}"/>
            </p:inputText>

            <h:outputText value="Inspector responsible *: " style="font-weight: bold" />                       
            <p:autoComplete id="inspector"
                            var="assignedTo"
                            size="40"
                            value="#{legalMetrologyManager.currentPetrolStation.lastAssignee}"
                            title="#{legalMetrologyManager.currentPetrolStation.lastAssignee}"
                            itemLabel="#{assignedTo.name}"
                            itemValue="#{assignedTo}"
                            converter="employeeConverter"
                            forceSelection="true"
                            completeMethod="#{App.completeEmployee}" >
                <p:ajax event="itemSelect"
                        listener="#{legalMetrologyManager.updatePetrolStationLastAssignee}"/>
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolStationLastAssignee}"/>
            </p:autoComplete>   

            <h:outputText value="Certication" style="font-style: italic"/>
            <h:outputText value="" />

            <h:outputText value="Last certified:" style="font-weight: bold" />     
            <h:panelGroup>
                <p:calendar id="datePetrolStationLastCertified"
                            value="#{legalMetrologyManager.currentPetrolStation.certification.dateIssued}"
                            navigator="true"
                            pattern="MMM dd, yyyy" >
                    <p:ajax event="dateSelect"
                            update="datePetrolStationCertificationDue,petrolPumpTable"
                            listener="#{legalMetrologyManager.updatePetrolStationDateCertified()}" />       
                    <p:ajax event="keyup"
                            update="datePetrolStationCertificationDue,petrolPumpTable"
                            listener="#{legalMetrologyManager.updatePetrolStationDateCertified()}" />   
                </p:calendar>
                <p:spacer height="0" width="5"/>
                <h:outputText value="Due:" style="font-weight: bold" />     
                <p:spacer height="0" width="5"/>
                <p:calendar id="datePetrolStationCertificationDue"
                            value="#{legalMetrologyManager.currentPetrolStation.certification.expiryDate}"
                            navigator="true"
                            pattern="MMM dd, yyyy" >
                    <p:ajax event="dateSelect"
                            update="petrolPumpTable"
                            listener="#{legalMetrologyManager.updatePetrolStationDateCertificationDue()}" />      
                    <p:ajax event="keyup"
                            update="petrolPumpTable"
                            listener="#{legalMetrologyManager.updatePetrolStationDateCertificationDue()}" /> 
                </p:calendar>
            </h:panelGroup>

            <h:outputText value="Address" style="font-style: italic"/>
            <h:outputText value="" />

            <h:outputText value="Address (line 1):" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolStation.billingAddress.addressLine1}"
                         id="petrolStationAddressLine1" >
                <p:ajax event="keyup"
                        global="false"                            
                        listener="#{legalMetrologyManager.updatePetrolStation()}"
                        process="@this"/>
            </p:inputText>

            <h:outputText value="Address (line 2):" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolStation.billingAddress.addressLine2}"
                         id="petrolStationAddressLine2" >
                <p:ajax event="keyup"
                        global="false"                            
                        listener="#{legalMetrologyManager.updatePetrolStation()}"
                        process="@this"/>
            </p:inputText>
            
            <h:outputText value="Parish:"/>
            <h:selectOneMenu value="#{legalMetrologyManager.currentPetrolStation.billingAddress.stateOrProvince}"                             
                             id="petrolStationStateOrProvince" >
                <p:ajax
                    global="true"
                    listener="#{legalMetrologyManager.updatePetrolStation()}"
                    process="@this" />
                <f:selectItems value="#{App.jamaicaParishes}" />
            </h:selectOneMenu>

            <h:outputText value="City:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolStation.billingAddress.city}"
                         id="petrolStationCity" >
                <p:ajax event="keyup"
                        global="false"                            
                        listener="#{legalMetrologyManager.updatePetrolStation()}"
                        process="@this"/>
            </p:inputText>

        </h:panelGrid>
        <hr/>
        <p:commandButton
            actionListener="#{legalMetrologyManager.createNewPump}"
            update=":unitDialogForms:petrolPumpDetailDialog"
            onstart="longProcessDialogVar.show();"
            oncomplete="longProcessDialogVar.hide();petrolPumpDialog.show()"
            value="Add pump"
            title="Add a petrol pump"
            icon="ui-icon ui-icon-plus"
            process="@this" />      
        <p:dataTable id="petrolPumpTable"
                     var="pump"                     
                     paginator="true"
                     rows="15"                     
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                     value="#{legalMetrologyManager.currentPetrolStation.petrolPumps}">
            <f:facet name="header">
                <h:outputText value="Petrol Pumps for #{legalMetrologyManager.currentPetrolStation.name}"/>
            </f:facet>

            <p:column style="width:100px" >
                <f:facet name="header">
                    <h:outputText value="Pump #/ID"/>
                </f:facet>
                <h:outputText value="#{pump.number}" />
            </p:column>

            <p:column style="width:100px" >
                <f:facet name="header">
                    <h:outputText value="Nozzles"/>
                </f:facet>
                <h:outputText value="#{pump.numberOfNozzles}" />
            </p:column>

            <p:column style="width:100px">
                <f:facet name="header">
                    <h:outputText value="Last Certified"/>
                </f:facet>
                <h:outputText value="#{pump.certification.dateIssued}">
                    <f:convertDateTime pattern="MMM dd, yyyy"/>
                </h:outputText>
            </p:column>
            <p:column style="width:100px">
                <f:facet name="header">
                    <h:outputText value="Certification Due"/>
                </f:facet>
                <h:outputText value="#{pump.certification.expiryDate}">
                    <f:convertDateTime pattern="MMM dd, yyyy"/>
                </h:outputText>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Comment"/>
                </f:facet>
                <h:outputText value="#{pump.status}"/>
            </p:column>

            <p:column style="width:32px">
                <p:commandButton update=":unitDialogForms:petrolPumpDetailDialog"
                                 onstart="longProcessDialogVar.show();"                            
                                 oncomplete="petrolPumpDialog.show();longProcessDialogVar.hide();"
                                 title="View/Edit"
                                 process="@this"
                                 icon="ui-icon ui-icon-pencil">
                    <f:setPropertyActionListener value="#{pump}"
                                                 target="#{legalMetrologyManager.currentPetrolPump}" />
                </p:commandButton>
            </p:column>

            <p:column style="width:32px" 
                      rendered="#{legalMetrologyManager.canDeletePetrolPump}">
                <p:commandButton title="Delete"
                                 onclick="petrolPumpDeleteConfirm.show();"
                                 process="@this"
                                 icon="ui-icon ui-icon-trash">
                    <f:setPropertyActionListener value="#{pump}"
                                                 target="#{legalMetrologyManager.currentPetrolPump}" />
                </p:commandButton>
            </p:column>

        </p:dataTable>
        <p:commandButton
            actionListener="#{legalMetrologyManager.createNewPump}"
            update=":unitDialogForms:petrolPumpDetailDialog"
            onstart="longProcessDialogVar.show();"
            oncomplete="longProcessDialogVar.hide();petrolPumpDialog.show()"
            value="Add pump"
            title="Add a petrol pump"
            icon="ui-icon ui-icon-plus"
            process="@this" />      
        <hr/>
        <p:commandButton value="Save"
                         actionListener="#{legalMetrologyManager.savePetrolStation}"   
                         icon="ui-icon ui-icon-check"
                         process=":unitDialogForms:petrolStationDetailDialog"/>
        <p:spacer height="0" width="10"/>
        <p:commandButton value="Close"
                         actionListener="#{legalMetrologyManager.closePetrolStationDialog1()}"                         
                        
                         update=":mainTabViewForm:mainTabView:legalMetTabView:petrolStationsDatabaseTable"
                         process=":unitDialogForms:petrolStationDetailDialog"
                         icon="ui-icon ui-icon-close" />
    </p:dialog>

    <p:confirmDialog severity="alert"
                     rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
                     id="petrolStationSaveConfirm"
                     message="The current petrol station detail was modified. Do you wish to save it?"
                     header="Petrol Station Detail Modified"
                     widgetVar="petrolStationSaveConfirmDialog"
                     width="425">

        <p:commandButton value="Yes"                             
                         actionListener="#{legalMetrologyManager.savePetrolStation()}"
                         onstart="longProcessDialogVar.show();"
                         update=":mainTabViewForm:mainTabView:legalMetTabView:petrolStationsDatabaseTable"                        
                         oncomplete="longProcessDialogVar.hide();petrolStationSaveConfirmDialog.hide();"
                         icon="ui-icon-check"
                         process="@this,:unitDialogForms:petrolStationDetailDialog"/>
        <p:commandButton value="No"
                         actionListener="#{legalMetrologyManager.cancelPetrolStationEdit}"
                         oncomplete="petrolStationSaveConfirmDialog.hide();petrolStationDialog.hide();"
                         process="@this"
                         icon="ui-icon-close"/>       
    </p:confirmDialog>

    <p:dialog width="800"
              height="500"
              draggable="true"
              id="petrolPumpDetailDialog"
              modal="true"
              rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
              widgetVar="petrolPumpDialog"
              header="Pump Detail" >

        <!-- to be duplicated at bottom -->
        <p:commandButton value="Ok"
                         actionListener="#{legalMetrologyManager.updatePetrolPumpsList}"
                         onstart="longProcessDialogVar.show();"                            
                         oncomplete="longProcessDialogVar.hide();petrolPumpDialog.hide();"
                         update=":unitDialogForms:petrolPumpTable"
                         icon="ui-icon ui-icon-check"
                         process="@this"/>
        <p:spacer height="0" width="5"/>
        <p:commandButton value="Cancel"
                         actionListener="#{legalMetrologyManager.cancelPetrolPumpEdit}"
                         update=":unitDialogForms:petrolPumpTable"
                         onstart="longProcessDialogVar.show();"
                         oncomplete="longProcessDialogVar.hide();petrolPumpDialog.hide();"
                         icon="ui-icon ui-icon-close"
                         process="@this"/>
        <hr/>
        <h:panelGrid columns="2" id="petrolPumpDialogFormContent">
            <h:outputText value="ID/Number:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPump.number}"
                         id="petrolPumpNumber"
                         readonly="false"
                         validatorMessage="Please enter a valid ID/Number" >
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPump()}" />  
            </p:inputText>

            <h:outputText value="Manufacturer:" />
            <p:autoComplete id="petrolPumpManufacturer"
                            value="#{legalMetrologyManager.currentPetrolPump.manufacturer}"
                            var="manufacturer"
                            itemLabel="#{manufacturer.name}"
                            itemValue="#{manufacturer}"
                            title="#{manufacturer.name}"
                            converter="manufacturerConverter"
                            completeMethod="#{App.completeManufacturer}" >
                <p:ajax event="itemSelect"
                        listener="#{legalMetrologyManager.updateCurrentPetrolPumpManufacturer}" />       
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updateCurrentPetrolPumpManufacturer}" />     
            </p:autoComplete>

            <h:outputText value="Model:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPump.model}"
                         id="petrolPumpModel" >
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPump()}" />  
            </p:inputText>

            <h:outputText value="Serial No.:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPump.serialNumber}"
                         id="petrolPumpSerialNumber" >
                <p:ajax event="keyup"                        
                        listener="#{legalMetrologyManager.updatePetrolPump()}" />  
            </p:inputText>

            <h:outputText value="Last certified:" style="font-weight: bold" />
            <p:calendar id="datePumpLastCertified"                        
                        value="#{legalMetrologyManager.currentPetrolPump.certification.dateIssued}"
                        navigator="true"
                        pattern="MMM dd, yyyy" >
                <p:ajax event="dateSelect"
                        update="datePumpCertificatioDue,petrolPumpNozzleTable"
                        listener="#{legalMetrologyManager.updatePetrolPumpDateCertified()}" />  
                 <p:ajax event="keyup"
                        update="datePumpCertificatioDue,petrolPumpNozzleTable"
                        listener="#{legalMetrologyManager.updatePetrolPumpDateCertified()}" /> 
            </p:calendar>

            <h:outputText value="Certification due:" style="font-weight: bold" />
            <p:calendar id="datePumpCertificatioDue"
                        value="#{legalMetrologyManager.currentPetrolPump.certification.expiryDate}"
                        navigator="true"
                        pattern="MMM dd, yyyy" >
                <p:ajax event="dateSelect"
                        update="petrolPumpNozzleTable"
                        listener="#{legalMetrologyManager.updatePetrolPumpDateCertificationDue()}" />  
                <p:ajax event="keyup"
                        update="petrolPumpNozzleTable"
                        listener="#{legalMetrologyManager.updatePetrolPumpDateCertificationDue()}" />  
            </p:calendar>

            <h:outputText value="Comment:" />
            <p:inputTextarea id="petrolPumpComment"
                             value="#{legalMetrologyManager.currentPetrolPump.status}"
                             autoResize="false"
                             style="width: 250px" >
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPump()}" />  
            </p:inputTextarea>
        </h:panelGrid>         
        <hr/>        
        <p:commandButton value="Add nozzle"
                         actionListener="#{legalMetrologyManager.createNewNozzle}"
                         onstart="longProcessDialogVar.show();"  
                         oncomplete="longProcessDialogVar.hide();petrolPumpNozzleDialog.show()"
                         title="Add petrol pump nozzle"
                         icon="ui-icon ui-icon-plus"
                         process="@this"/>

        <p:dataTable id="petrolPumpNozzleTable"
                     var="nozzle"
                     paginator="true" rows="6"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                     value="#{legalMetrologyManager.currentPetrolPump.nozzles}">
            <f:facet name="header">
                <h:outputText value="Petrol Pump Nozzles"/>
            </f:facet>
            <p:column headerText="Nozzle #/ID" style="width:64px">
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.number}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{nozzle.number}" style="width:64px" />
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Model" >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.model}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{nozzle.model}" style="width:92px"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Serial No." >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.serialNumber}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{nozzle.serialNumber}" style="width:92px"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Seal No." >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.lastSealIssued.number}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{nozzle.lastSealIssued.number}" style="width:92px"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Sticker Log" >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.lastStickerIssued.number}"/>
                    </f:facet>
                    <f:facet name="input">
                        <p:inputText value="#{nozzle.lastStickerIssued.number}" style="width:92px"/>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Measure(s)(L)" >
                <p:cellEditor>
                    <f:facet name="output">
                        <h:outputText value="#{nozzle.testMeasures}"/>
                    </f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu  value="#{nozzle.testMeasures}">
                            <f:selectItems  value="#{App.testMeasures}" />
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>
            <p:column style="width:16px">
                <p:commandButton update=":unitDialogForms:petrolPumpNozzleDetailDialog"
                                 onstart="longProcessDialogVar.show();" 
                                 oncomplete="longProcessDialogVar.hide();petrolPumpNozzleDialog.show()"
                                 title="View/Edit"
                                 process="@this"
                                 icon="ui-icon ui-icon-pencil">
                    <f:setPropertyActionListener value="#{nozzle}"
                                                 target="#{legalMetrologyManager.currentPetrolPumpNozzle}" />
                </p:commandButton>
            </p:column>
            <p:column style="width:16px" rendered="#{legalMetrologyManager.canDeletePetrolPumpNozzle}">
                <p:commandButton 
                    onstart="longProcessDialogVar.show();"                  
                    oncomplete="longProcessDialogVar.hide();petrolPumpNozzleDeleteConfirm.show();"
                    title="Delete"
                    process="@this"
                    icon="ui-icon ui-icon-trash">
                    <f:setPropertyActionListener value="#{nozzle}"
                                                 target="#{legalMetrologyManager.currentPetrolPumpNozzle}" />
                </p:commandButton>
            </p:column>

        </p:dataTable>

        <p:commandButton value="Add nozzle"
                         actionListener="#{legalMetrologyManager.createNewNozzle}"
                         onstart="longProcessDialogVar.show();"  
                         oncomplete="longProcessDialogVar.hide();petrolPumpNozzleDialog.show()"
                         title="Add petrol pump nozzle"
                         icon="ui-icon ui-icon-plus"
                         process="@this"/>
        <hr/>
        <p:commandButton value="Ok"
                         actionListener="#{legalMetrologyManager.updatePetrolPumpsList}"
                         onstart="longProcessDialogVar.show();"                            
                         oncomplete="longProcessDialogVar.hide();petrolPumpDialog.hide();"
                         update=":unitDialogForms:petrolPumpTable"
                         icon="ui-icon ui-icon-check"
                         process="@this"/>
        <p:spacer height="0" width="5"/>
        <p:commandButton value="Cancel"
                         actionListener="#{legalMetrologyManager.cancelPetrolPumpEdit}"
                         update=":unitDialogForms:petrolPumpTable"
                         onstart="longProcessDialogVar.show();"
                         oncomplete="longProcessDialogVar.hide();petrolPumpDialog.hide();"
                         icon="ui-icon ui-icon-close"
                         process="@this"/>
    </p:dialog>

    <p:dialog width="400"
              height="425"
              draggable="true"
              modal="true"
              rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
              id="petrolPumpNozzleDetailDialog"
              widgetVar="petrolPumpNozzleDialog"
              header="Nozzle Detail" >

        <p:commandButton value="Ok"
                         actionListener="#{legalMetrologyManager.updatePetrolPumpNozzlesList}"
                         update=":unitDialogForms:petrolPumpNozzleTable"
                         oncomplete="petrolPumpNozzleDialog.hide();"
                         icon="ui-icon ui-icon-check"
                         process=":unitDialogForms:petrolPumpNozzleDetailDialog"/>
        <p:spacer height="0" width="10"/>        
        <p:commandButton value="Cancel"
                         actionListener="#{legalMetrologyManager.cancelPetrolPumpNozzleEdit}"
                         oncomplete="petrolPumpNozzleDialog.hide();"
                         icon="ui-icon-close"
                         process=":unitDialogForms:petrolPumpNozzleDetailDialog"/>
        <hr/>

        <h:panelGrid columns="2" id="petrolPumpNozzleDialogFormContent">

            <h:outputText value="ID/Number *:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPumpNozzle.number}"
                         readonly="false"                            
                         validatorMessage="Please enter a valid ID/Number" >
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPumpNozzle()}" />  
            </p:inputText>

            <h:outputText value="Manufacturer:" />
            <p:autoComplete value="#{legalMetrologyManager.currentPetrolPumpNozzle.manufacturer}"
                            var="manufacturer"
                            itemLabel="#{manufacturer.name}"
                            itemValue="#{manufacturer}"
                            title="#{manufacturer.name}"
                            converter="manufacturerConverter"
                            completeMethod="#{App.completeManufacturer}" >
                <p:ajax event="itemSelect"
                        listener="#{legalMetrologyManager.updatePetrolPumpNozzleManufacturer}" />    
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPumpNozzleManufacturer}" />   
            </p:autoComplete>

            <h:outputText value="Model:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPumpNozzle.model}">
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPumpNozzle()}" />  
            </p:inputText>

            <h:outputText value="Serial No.:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPumpNozzle.serialNumber}" >
                <p:ajax event="keyup"
                        listener="#{legalMetrologyManager.updatePetrolPumpNozzle()}" />  
            </p:inputText>

            <h:outputText value="Test Measure(s)(L):" />
            <h:selectOneMenu  value="#{legalMetrologyManager.currentPetrolPumpNozzle.testMeasures}">
                <f:selectItems  value="#{App.testMeasures}" />
                <p:ajax listener="#{legalMetrologyManager.updatePetrolPumpNozzle()}" 
                        process="@this"/>  
            </h:selectOneMenu>

            <h:outputText value="Last sticker No. *:" />
            <p:inputText style="font-weight: bold; background-color: lightyellow;"
                         readonly="true"
                         value="#{legalMetrologyManager.currentPetrolPumpNozzle.lastStickerIssued.number}"/>

            <h:outputText value="Last Sticker Issued:" />
            <p:inputText id="stickerDateIssued"
                         style="font-weight: bold; background-color: lightyellow;"
                         readonly="true"
                         value="#{legalMetrologyManager.currentPetrolPumpNozzle.lastStickerIssued.dateIssued}" >
                <f:convertDateTime pattern="MMM dd, yyyy"/>
            </p:inputText>

            <h:outputText value="Last Seal No. *:" />
            <p:inputText style="font-weight: bold; background-color: lightyellow;"
                         readonly="true"
                         value="#{legalMetrologyManager.currentPetrolPumpNozzle.lastSealIssued.number}"/>

            <h:outputText value="Last Seal Issued:" />
            <p:inputText value="#{legalMetrologyManager.currentPetrolPumpNozzle.lastSealIssued.dateIssued}" 
                         style="font-weight: bold; background-color: lightyellow;"
                         readonly="true">
                <f:convertDateTime pattern="MMM dd, yyyy"/>
            </p:inputText>        

            <h:outputText value="Working status:" />
            <h:selectOneMenu  value="#{legalMetrologyManager.currentPetrolPumpNozzle.status}">
                <f:selectItems  value="#{App.equipmentWorkingStatus}" />
                <p:ajax listener="#{legalMetrologyManager.updatePetrolPumpNozzle()}" 
                        process="@this"/>  
            </h:selectOneMenu>
        </h:panelGrid>
        <hr/>
        <p:commandButton value="Ok"
                         actionListener="#{legalMetrologyManager.updatePetrolPumpNozzlesList}"
                         update=":unitDialogForms:petrolPumpNozzleTable"
                         oncomplete="petrolPumpNozzleDialog.hide();"
                         icon="ui-icon ui-icon-check"
                         process=":unitDialogForms:petrolPumpNozzleDetailDialog"/>
        <p:spacer height="0" width="10"/>
        <p:commandButton value="Cancel"
                         actionListener="#{legalMetrologyManager.cancelPetrolPumpNozzleEdit}"
                         oncomplete="petrolPumpNozzleDialog.hide();"
                         icon="ui-icon-close"
                         process=":unitDialogForms:petrolPumpNozzleDetailDialog"/>
    </p:dialog>

    <p:confirmDialog severity="alert"
                     message="Are you sure you wish to delete this petrol pump?"
                     header="Delete Petrol Pump"
                     rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
                     widgetVar="petrolPumpDeleteConfirm">        
        <p:commandButton value="Yes"                             
                         action="#{legalMetrologyManager.deletePetrolPump}"
                         oncomplete="petrolPumpDeleteConfirm.hide();"
                         icon="ui-icon ui-icon-check"
                         process="@this"/>
        <p:commandButton value="No"
                         onclick="petrolPumpDeleteConfirm.hide();"
                         process="@this"
                         icon="ui-icon-close"/>      
    </p:confirmDialog>

    <p:confirmDialog severity="alert"
                     message="Are you sure you wish to delete this nozzle?"
                     rendered="#{legalMetrologyManager.user.legalMetrologyUnit}"
                     header="Delete Pump Nozzle"
                     widgetVar="petrolPumpNozzleDeleteConfirm">       
        <p:commandButton value="Yes"
                         action="#{legalMetrologyManager.deletePetrolPumpNozzle}"
                         oncomplete="petrolPumpNozzleDeleteConfirm.hide();"
                         icon="ui-icon ui-icon-check"
                         process="@this"/>
        <p:commandButton value="No"
                         onclick="petrolPumpNozzleDeleteConfirm.hide();"
                         process="@this"
                         icon="ui-icon-close"/>    
    </p:confirmDialog>

</html>
