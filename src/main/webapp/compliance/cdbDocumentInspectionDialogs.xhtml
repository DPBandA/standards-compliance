<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:form id="DocumentInspectionDialogForm">
        <p:dialog width="600"
                  height="350"
                  draggable="true"
                  modal="true"      
                  closable="false"
                  widgetVar="DocumentInspectionDialog"
                  header="Document Inspection" >

            <p:commandButton value="Save"
                             onstart="longProcessDialogVar.show();"
                             actionListener="#{complianceManager.saveDocumentInspection}"                         
                             oncomplete="handleSaveEntityRequest(xhr,status,args);"
                             onerror="connectionErrorDialog.show();"
                             icon="ui-icon-disk"
                             process="@this"/>
            <p:spacer height="0" width="4"/>
            <p:commandButton value="Close"      
                             onstart="longProcessDialogVar.show();"
                             actionListener="#{complianceManager.closeDocumentInspection}"
                             update=":mainTabViewForm:mainTabView:documentInspectionsTable"                             
                             oncomplete="DocumentInspectionDialog.hide();longProcessDialogVar.hide();"
                             icon="ui-icon-close"
                             process="@this"/>
            <hr/>
            <h:panelGrid columns="2" cellspacing="5">
                <ui:remove>
                    <h:outputText value="Document name/title *:" />          
                    <p:inputText value="#{complianceManager.currentDocumentInspection.name}"                              
                                 style="width: 300px">
                        <p:ajax
                            global="true"
                            listener="#{complianceManager.updateJob}"
                            process="@this" />
                    </p:inputText>
                </ui:remove>

                <h:outputText value="Consignee *: " />
                <h:panelGroup>
                    <p:autoComplete id="consignee"
                                    maxResults="12"                                          
                                    value="#{complianceManager.currentDocumentInspection.consignee.name}"                                           
                                    forceSelection="false"
                                    completeMethod="#{complianceManager.completeClientName}">
                        <p:ajax event="itemSelect"
                                listener="#{complianceManager.updateDocumentInspectionConsignee}"
                                process="@this"/>

                        <p:ajax event="keyup"
                                listener="#{complianceManager.updateJob}"
                                process="@this"/>
                    </p:autoComplete>
                    <p:watermark value="-- N/A --" for="consignee"/>                            
                    <p:spacer height="0" width="4"/>
                    <p:commandButton icon="ui-icon-pencil"
                                     actionListener="#{complianceManager.editDocumentInspectionConsignee}"
                                     update=":clientForm"
                                     oncomplete="clientFormDialog.show();longProcessDialogVar.hide();"   
                                     process="@this"
                                     title="Edit this Consignee's detail or add a new broker"/>
                </h:panelGroup>   

                <ui:remove>
                    <h:outputText value="Type *:" />          
                    <p:inputText value="#{complianceManager.currentDocumentInspection.type}"                             
                                 style="width: 300px">
                        <p:ajax
                            global="true"
                            listener="#{complianceManager.updateJob}"
                            process="@this" />
                    </p:inputText>
                </ui:remove>

                <h:outputText value="Port of Entry:" />
                <h:selectOneMenu value="#{complianceManager.currentDocumentInspection.portOfEntry}" >
                    <p:ajax
                        global="true"
                        listener="#{complianceManager.updateJob}"
                        process="@this" />
                    <f:selectItems value="#{complianceManager.portsOfEntry}" />
                </h:selectOneMenu>     

                <h:outputText value="Inspector *:" />
                <p:autoComplete style="width: 75%;"                               
                                readonly="true"
                                var="inspector"
                                value="#{complianceManager.currentDocumentInspection.inspector}"
                                title="#{complianceManager.currentDocumentInspection.inspector}"
                                itemLabel="#{inspector.name}"
                                itemValue="#{inspector}"
                                converter="employeeConverter"
                                forceSelection="true"   
                                completeMethod="#{complianceManager.completeEmployee}" >
                    <p:ajax event="itemSelect"
                            listener="#{complianceManager.updateDocumentInspectionInspector}"
                            process="@this"/>
                    <p:ajax event="keyup"
                            listener="#{complianceManager.updateDocumentInspectionInspector}"
                            process="@this"/>
                </p:autoComplete>

                <h:outputText value="Date of Inspection *:"  />
                <p:calendar pattern="yyyy-MM-dd" 
                            showOn="button"
                            timeOnly="false"
                            value="#{complianceManager.currentDocumentInspection.dateOfInspection}" >
                    <p:ajax event="dateSelect"
                            listener="#{complianceManager.updateJob}" />
                    <p:ajax event="keyup"
                            listener="#{complianceManager.updateJob}" />
                </p:calendar>

                <h:outputText value="Action taken:" />
                <h:selectOneMenu value="#{complianceManager.currentDocumentInspection.actionTaken}" >
                    <p:ajax
                        global="true"
                        listener="#{complianceManager.updateJob}"
                        process="@this" />
                    <f:selectItems value="#{complianceManager.documentInspectionActions}" />
                </h:selectOneMenu>   

                <h:outputText value="Comment:"  />
                <p:inputTextarea value="#{complianceManager.currentDocumentInspection.comments}"
                                 style="width: 300px"
                                 rows="3"
                                 maxlength="1000"
                                 autoResize="false">
                    <p:ajax event="keyup"
                            listener="#{complianceManager.updateJob}"
                            process="@this"/>
                </p:inputTextarea>


            </h:panelGrid>
            <hr/>
            <p:commandButton value="Save"
                             onstart="longProcessDialogVar.show();"
                             actionListener="#{complianceManager.saveDocumentInspection}"                         
                             oncomplete="handleSaveEntityRequest(xhr,status,args);"
                             onerror="connectionErrorDialog.show();"
                             icon="ui-icon-disk"
                             process="@form"/>
            <p:spacer height="0" width="4"/>
            <p:commandButton value="Close"      
                             onstart="longProcessDialogVar.show();"
                             actionListener="#{complianceManager.closeDocumentInspection}"
                             update=":mainTabViewForm:mainTabView:documentInspectionsTable"                             
                             oncomplete="DocumentInspectionDialog.hide();longProcessDialogVar.hide();"
                             icon="ui-icon-close"
                             process="@this"/>

        </p:dialog>
    </h:form>

</html>